{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonForm.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","searchQuery","handleSearch","value","onChange","Persons","persons","handleDelete","map","p","name","number","onClick","id","PersonForm","props","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","Notification","message","error","className","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","setPersons","setNewName","setNewNumber","setSearchQuery","filteredPersons","setFilteredPersons","setMessage","useEffect","personService","initialPersons","event","q","target","f","filter","i","toLowerCase","includes","length","console","log","preventDefault","nameObject","existing","find","window","confirm","returnedName","pers","catch","err_message","split","setTimeout","n","concat","res","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9bbbf2d6.chunk.js","sourcesContent":["const Filter = ({ searchQuery, handleSearch }) => (\n  <div>\n    filter shown with:\n    <input\n      value={searchQuery}\n      onChange={handleSearch} />\n  </div>\n)\n\nexport default Filter","const Persons = ({ persons, handleDelete }) => {\n  return (\n    persons.map(p => \n      <p key={p.name}>{p.name} {p.number}  \n          <button onClick={()=>handleDelete(p.id)}>delete</button>\n      </p>\n    )\n  )\n}\n\nexport default Persons","const PersonForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n      <div>\n        name:\n            <input\n          value={props.newName}\n          onChange={props.handleNameChange} />\n      </div>\n      <div>number:\n            <input\n          value={props.newNumber}\n          onChange={props.handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","const Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  const type = message.error ? 'error': 'success'\n  return (\n    <div className={type}>\n      {message.message}\n    </div>\n  )\n\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\n// eslint-disable-next-line\nexport default { getAll, create, update, deletePerson }","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Notification from './components/Notification'\nimport personService from './services/persons'\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchQuery, setSearchQuery] = useState('')\n  const [filteredPersons, setFilteredPersons] = useState(null)\n  const [message, setMessage] = useState(null)\n\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n    const existing = persons.find(i => i.name === newName)\n    if (existing) {\n      if (window.confirm(`${existing.name} is already added to phonebook, replace the old number with a new one?`)) {\n        personService\n          .update(existing.id, nameObject)\n          .then(returnedName => {\n            setPersons(persons.map(pers => pers.id !== existing.id ? pers : returnedName))\n            setNewName('')\n            setNewNumber('')\n          }).catch(error => {\n            const err_message = error.response.data.split(\".\")[0].split(\"<pre>ValidationError: \")[1]\n            if (!err_message) {\n              setMessage({error: true, message:\n                `Information of ${existing.name} has already been removed from server`})\n               setTimeout(() => {\n                 setMessage(null)\n               }, 5000)\n             setPersons(persons.filter(n => n.id !== existing.id))\n            } else {\n              setMessage({error: true, message:`${err_message}.`})\n                setTimeout(() => {\n                  setMessage(null)\n                }, 5000)\n            }\n        })\n      }\n    } else {\n      personService\n        .create(nameObject)\n        .then(returnedName => {\n          setPersons(persons.concat(returnedName))\n\n          setNewName('')\n          setNewNumber('')\n          setMessage({error: false, message:`Added ${newName}`})\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          // this is the way to access the error message\n          const err_message = error.response.data.split(\".\")[0].split(\"<pre>ValidationError: \")[1]\n          setMessage({error: true, message:`${err_message}.`})\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n    }\n\n  }\n\n  const handleDelete = (id) => {\n    const p = persons.find(i => i.id === id)\n    if (window.confirm(`Delete ${p.name}?`)) {\n      personService\n        .deletePerson(id)\n        .then(res => {\n          setPersons(persons.filter(n => n.id !== id))\n          setMessage({error: false, message:`Deleted ${p.name}`})\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearch = (event) => {\n    const q = event.target.value\n    const f = persons.filter(i => i.name.toLowerCase().includes(q.toLowerCase()))\n    setSearchQuery(q)\n    if (f.length !== persons.length){\n      setFilteredPersons(f)\n    } else {\n      setFilteredPersons(null)\n    }\n    console.log(filteredPersons);\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter searchQuery={searchQuery} handleSearch={handleSearch} />\n      <h2>Add New</h2>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={filteredPersons?filteredPersons:persons} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}